# DiffTool
分析文件/安装包diff信息



### 使用指南：

1. **运行程序**：双击运行脚本或在终端输入 `python3 diff_tool_pro.py`
2. **选择输入**：
   - **A**：选择旧版本的 APK/IPA 或文件夹。
   - **B**：选择新版本的 APK/IPA 或文件夹。
3. **开始分析**：点击“开始对比分析”。界面会出现进度条，状态栏会显示当前正在解压或对比的文件进度。
4. **查看结果**：
   - 程序会在下方的表格中列出所有文件的路径。
   - **状态**列显示：相同、差异、仅在A中（删除）、仅在B中（新增）。
   - **相似度**列：如果是二进制文件差异，显示 Hash不同；如果是文本文件（如 xml, json, 代码），会尝试计算文本相似度百分比。
   - 你可以点击表头进行**排序**（例如按大小或相似度排序）。
5. **导出报表**：
   - 点击“导出 HTML 报表”，保存为一个 .html 文件。
   - 打开该 HTML 文件，你将看到一个**饼状图**（直观展示差异比例）和一个支持**搜索过滤**的详细文件列表。

### 技术实现细节（黑盒内部）：

- **格式兼容**：利用 Python 内置的 zipfile 库，.apk 和 .ipa 本质上都是 Zip 格式，程序会自动识别后缀并解压到系统的临时目录（tempfile），分析完后自动清理，不占用磁盘空间。
- **哈希对比**：为了速度和准确性，优先计算 SHA256 哈希值。如果哈希相同，则文件 100% 相同。
- **文本相似度**：使用了 Python 的 difflib.SequenceMatcher。只有当文件被判定为“差异”且看似文本文件时，才会触发这个耗时较长的计算，以提高效率。
- **GUI 响应**：耗时的 I/O 操作（解压、哈希计算）被放入后台线程 (threading)，通过回调函数更新主界面的 UI，防止程序假死。
- **HTML 报表**：HTML 文件内嵌了数据和简单的 CSS/JS。引用了 CDN 上的 Chart.js 库来绘制图表，确保在有网络环境下图表美观，无网络时仅显示表格。
